language: java
jdk:
- oraclejdk10
- oraclejdk9
- oraclejdk8
- openjdk10
- openjdk9
- openjdk8
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
env:
  # CODECOV_TOKEN
  # SONAR_TOKEN
  global:
  - secure: lNsMF111tdNffiQI3RsAec7R8VES87DCvs/O8TNmewZ0hzy8yZGLBW97vkFKaRAPsmJlZqYarXdCv/3nniToTY4IZ1i/IYBKdAVJ1hhYW8JxDAZpCviOMm5Aw66/yZ15NXlfplbjcfczdFACZlgyPnkgiEDhAmEuEtP9M53RNngHgI3RqAuqY2IeG6Sa/Q4BiBPMx3zuRMKhHCauFVdVWzbHU2EPtXL8S8yOuY8Z7I6GvxWqq3RZrqanZCmEdzl38TQrsopHLHOg7OErTGOubfrEfdDP6OcwCef8RbOM0ve758ZLcmDUVwIWDiYt8RkGRty5elbQPjTmztdtMo9OnWQ3pzlWD2DwwyXIZ/PJ/cqdiJVzsnR6Tvmk1xcC5N85ReLrtQkxdWxwPBxOgymLc0+PD//d97icg+sRLvp3M5eOjC1RcbACPf5dDZEG1CnM8baVGvPobKdafruAuScmTZ5vYVwYo12FKTJn4elrqZqb2KfvCO5cLqOIj+UwcleRQxYtr191/404w/5KPjnh91Qqa1MFi4hR+jgiHvmDXN+GBKwbYYzdNvIOZ9T5qZiFAILIbeHOjmP9I4KQiEv2oxbbdnRui+17O3VKr0xvydcQYqM0iwtS5L2NAbaH+lH57yzdaFOAEKuyO+Qi2V2U13D5bPiMLVnjWo1qSvTnVps=
  - secure: Y3ti4jk+nHopp3fzFCMHpkXqrCZwpnEYsQTbJNrDp7k3kdAxkeOa2fpCaIfjMQf89HQVtKXnSp9XO8X5nJIjQYzjFM6mXJoSfeZ3DqKhUNS5tNQGCbtXG8rN/fD3sJ+jWG+1GPxcqaLn53TKDXpMywTB9T87+fNcxhLI1eWrZmxMiexFLyFg7SCAmI62ArDeKFFRFj2TvQJoL2XqqTBURvr4w6NBjIijk47rdXkO3niT5+tqLLGhglPHtJkb0sQUV2L/dc0ZZwYHI4tVwz7G+3ucB/XTYNy38XG0wo1yQDcsLzbHMO62pUAPG6DqkXK0i7H84Noxai1pfTS2oSChlB3s8OpQr5JEEIsleZkgrofnypP+LEN95wxfsAOD4gncGFSTJkjtIJomcpLxnlQKL/unW22GxdMbN++9/gxOMrlczyyZ4kkH78VtDZJXI9zgB2zl1MEyH0VJYy+mMKnah7yut2ND/jcMdoem81Z6TQca8qS9HagJ+LI1NRIBOPKTHldFlADFDnLA80NU5i2vnsZ0UUSrjOMAhtUucqlVonY1yT9NnHtMyW49TBJiR/HI2ZdtFiit0vOJTS6yhWA5CAfP3Sxs9YWNuKmPZcHI7UCeGe+8RIeN1WPghYJjTK62gVuqy+JXtSRY/hiEtGjKzMrKi8LzUTUUUHK05IHRm5Q=

script:
- "./gradlew --daemon"
- "./gradlew assemble -x test --parallel"
- "./gradlew test"
- "./gradlew jacocoTestReport"
- "bash <(curl -s https://codecov.io/bash) -t ${CODECOV_TOKEN}"
- "./gradlew sonarqube -Dsonar.organization=soramitsu -Dsonar.projectKey=sora-sdk -Dsonar.host.url=https://sonarcloud.io -Dsonar.login=${SONAR_TOKEN}"
