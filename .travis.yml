language: java
jdk:
- oraclejdk10
- oraclejdk9
- oraclejdk8
- openjdk10
- openjdk9
- openjdk8
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
env:
  global:
  - secure: TctcR4AdewAI9r612gSM4+Zp5PPZvd4cCD36E+4hJLkaxA4KQHMeDL2AB5jQoLolE1vqnFr9ZUxL3pDPVSlLAMVTPEoscKk3FfuNGN6SbXLXRWPRX20agkSzqx19kkktcEAIKEMq+s02m2yBWj4xIXgq8yZgHgG1V6V6OlpHIq/hxZDJ1Hbd0VIGz77k3xLzLbksyI6Esl34LpBcPf65RFq16G/uSBePUEtPzoPrIlUp5XHblKh1MqeLxUHgEMMOoCJBXGdJ27igREcAzwP+VDSLvT9jt2cX8bQ6A3CWLrLp0FlwEXhTIAfko+On1ya4+z3R1hDr7xJ5DcwhEK7VjU4EdANu+yg3CHV6Xn2kztAorPoSVqVqnLHzN15FI8dO2RWt+LhkgXIiT8m8XuZyYRg87elJGAI8jssPCUbIpZJVTCeOlbka36aQCrj5FrwVAenBNLln5e+XjFgT9uCvrgUEK5q/gWvbLVsZbo2sq/QC4M4Xu/ePEOVsOEx9poFiHqRIn0UB0Mntf6ZIwAKdiPr2DjlaP0eiwzMhZ5iuU6Rcij6DqYCr0x3iYqGUsN0TdHQfA4DWM67H4WdIrm7Wpe5rs9VB2uCA7L9ylRwIn8dTSxMrv0IYHQOPU1S9t5N4paHUZtRt/+3iFzc4BceaosRiiQiy8ooQ0VLc/hZl8Js=
  - secure: U04mxMrlx6IAGcJMMjP5Wf4MKFpBUx8fY/uU3ECqd0we7EfPlo/whoZvYNZU38c8ePudtNRAFMxHOxoOuGj4Lo5fTRdEqsAJLQ885dTg3k/ARPtW4uDMwgM4Hg55Mu4koSBaivQAfrcX9qbkXwBGFwP5eSsz4URwiyywva7/GvU5kNNfjkrEuoa3bYF15MSCBimeuDqBnSQjIZhYDZiqSAa2ht3rt9Qsyuf0zBN5C4L9pl/smLzleQteHHuQjsPE2diko/1WvGb0Q7QWmSvpFBoGihvj8t1zOlbOaQhG9EW9ROCtZf1WCgOa5GYjnKtwE0VYiNbmvGu9kKjczrBiDyPNtu+sEqnWWuTAQnjYMuxkSn9aAe7fsF9gTnxQqGY8XESa9gUOOJNMp94HzBvRcQ3VM05xWfv3osHOkUGt8H7RMU36YDD9ZTfsrYSMGlTXYlNDzaqeunD6wRSsGB3+7MZJ+Db9VogL7zMWshM1NsF5McxI4FygThyUllFXaF7MBCjDzV7bBZdUC5Ts9jg8QxDuJ3+XI6yiJiuh9hePhDnMfwREZiU0vMbx1W0SGNV1kkGT2hTwnlPMNo7nNjxeWgVTJeozuyiABDM7B1BB++WPMIoLLqspqJ9jTRfJbx2UvZPJCvHXO+44AQBQ6EKwFEGrogk2umY6xpTBHqxnOTU=
script:
- "./gradlew --daemon"
- "./gradlew assemble -x test --parallel"
- "./gradlew test"
- "./gradlew jacocoTestReport"
- bash <(curl -s https://codecov.io/bash) -t ${CODECOV_TOKEN}
- "./gradlew sonarqube \
  -Dsonar.organization=soramitsu \
  -Dsonar.projectKey=sora-crypto-java \
  -Dsonar.host.url=https://sonarcloud.io \
  -Dsonar.login=${SONAR_TOKEN}"
